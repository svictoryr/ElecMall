{{>layouts/header}}
<div class="container my-4">
    <h1 class="text-center mb-4"><b>일렉몰 게시판</b></h1>

    <!-- 토글 버튼 -->
    <div class="text-center mb-4">
        <button class="btn btn-primary toggle-button active" data-type="all">모든 게시글</button>
        <button class="btn btn-primary toggle-button" data-type="n">공지</button>
        <button class="btn btn-primary toggle-button" data-type="q">문의</button>
        <button class="btn btn-primary toggle-button" data-type="r">후기</button>
    </div>

    <input type="hidden" name="_csrf" value="{{_csrf.token}}">

    <div class="table-container">
        <div class="table-wrapper">
            {{#errorMessage}}
                <div class="alert alert-danger" role="alert">
                    {{errorMessage}}
                </div>
            {{/errorMessage}}
            <table class="table table-hover table-bordered" id="boardTable">
                <thead>
                <tr>
                    <th>글 번호</th>
                    <th>제목</th>
                    <th>작성자</th>
                    <th>작성일</th>
                    <th>조회수</th>
                </tr>
                </thead>
                <tbody>
                {{#boardItemAll}}
                    <tr class="board-item" data-type="{{boardType}}"> <!-- boardType으로 변경 -->
                        <td>{{boardId}}</td>
                        <td><a href="/elecmall/board/{{boardId}}" class="text-decoration-none">{{boardTitle}}</a></td>
                        <td>{{boardAuthor}}</td>
                        <td>{{writeDate}}</td>
                        <td>{{count}}</td>
                    </tr>
                {{/boardItemAll}}
                </tbody>
            </table>
            <div class="text-end mt-4">
                <a href="/elecmall/board/new_form" class="btn btn-primary">새 글 작성</a>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript 코드 -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggleButtons = document.querySelectorAll('.toggle-button');
        const boardItems = document.querySelectorAll('.board-item');

        // 모든 게시글 표시 (기본 값)
        boardItems.forEach(item => item.style.display = 'table-row');

        // 토글 버튼 클릭 이벤트 리스너
        toggleButtons.forEach(button => {
            button.addEventListener('click', function() {
                const type = this.getAttribute('data-type');

                // 모든 게시글 숨기기
                boardItems.forEach(item => {
                    if (type === 'all') {
                        item.style.display = 'table-row'; // 모든 게시글 보이기
                    } else {
                        // 클릭한 유형과 일치하는 게시글만 보이기
                        item.style.display = item.getAttribute('data-type') === type ? 'table-row' : 'none';
                    }
                });

                // 버튼의 active 클래스 토글
                toggleButtons.forEach(btn => btn.classList.remove('active')); // 모든 버튼에서 active 클래스 제거
                this.classList.add('active'); // 클릭된 버튼에 active 클래스 추가
            });
        });
    });
</script>

{{>layouts/footer}}

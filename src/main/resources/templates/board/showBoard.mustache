{{>layouts/header}}
{{#errorMessage}}
    <div class="alert alert-danger" role="alert">
        {{errorMessage}}
    </div>
{{/errorMessage}}
<input type="hidden" name="_csrf" value="{{_csrf.token}}">
<div class="container mt-5">
    <div class="post-detail bg-white border rounded p-4 shadow-sm">
        <h2 class = "post-title">{{boardItem.boardTitle}}</h2>

        <div class="post-meta mb=4">
            <div class="meta-item">
                <h5>작성자</h5>
                <p>{{boardItem.boardAuthor}}</p>
            </div>
            <div class="meta-item">
                <h5>작성일자</h5>
                <p>{{boardItem.writeDate}}</p>
            </div>
            <div class="meta-item">
                <h5>조회수</h5>
                <p>{{boardItem.count}}</p>
            </div>
        </div>
        <div class="post-content mb-4">
            <h5>내용</h5>
            <div class="p-3 bg-white border rounded">
                <p class="mb-0">{{boardItem.boardContent}}</p>
            </div>
        </div>
        <div class="post-actions">
            <a href="/elecmall/board/list" class="btn btn-secondary">목록으로</a>
            {{#canEditOrDeleteB}}
                <a href="/elecmall/board/{{boardItem.boardId}}/edit" class="btn btn-warning">수정</a>
                <a href="/elecmall/board/{{boardItem.boardId}}/delete" class="btn btn-danger">삭제</a>
            {{/canEditOrDeleteB}}
        </div>
        <div class="post-content mb-4">
            <h5>댓글</h5>
            <div class="comments">
                {{#comments}} <!-- 댓글 리스트를 반복 -->
                    <div class="comment-item border rounded p-2 mb-2">
                        <p><strong>{{commentAuthor}}</strong> - {{commentWriteDate}}</p>
                        <p>{{commentComment}}</p>
                        {{#canEditOrDeleteC}} <!-- 각 댓글에 대해 권한 체크 -->
                            <a href="/elecmall/board/{{boardItem.boardId}}/comment/delete/{{this.commentId}}" class="btn btn-danger">X</a>
                        {{/canEditOrDeleteC}}
                    </div>
                {{/comments}}
                {{^comments}} <!-- 댓글이 없을 때 메시지 -->
                    <p>댓글이 없습니다.</p>
                {{/comments}}
            </div>
        </div>
        <form action="/elecmall/board/{{boardItem.boardId}}/comment" method="post">
            <input type="hidden" name="_csrf" value="{{_csrf.token}}">
            <div class="form-group">
                <label for="commentComment">댓글</label>
                <textarea id="commentComment" name="commentComment" class="form-control" rows="3" placeholder="댓글을 입력하세요"></textarea>
            </div>
            <button type="submit" class="btn btn-primary ">댓글 달기</button>
        </form>
    </div>
    </div>
</div>
{{>layouts/footer}}
